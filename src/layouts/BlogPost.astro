---
import type { CollectionEntry } from 'astro:content';
const { frontmatter } = Astro.props as {
  frontmatter: CollectionEntry<'posts'>['data'];
};

// Accept multiple possible keys from migrated content
const hero =
  (frontmatter as any).featured_image ??
  (frontmatter as any).featuredImage ??
  (frontmatter as any).image ??
  (frontmatter as any).thumbnail ??
  null;
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{frontmatter.title}</title>
    <meta name="description" content={frontmatter.description || ''} />
    <style>
      main{max-width:860px;margin:2rem auto;padding:0 1rem;font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial;line-height:1.65}
      article img{max-width:100%;height:auto}
      article p>img{display:block;margin-inline:auto}
      article h1,h2,h3{line-height:1.25}
      header{padding:1.5rem;border-bottom:1px solid #eee}
      nav a{margin-right:1rem;text-decoration:none}
      figure{margin:0 0 1.25rem}
      figcaption{font-size:.9rem;color:#666;text-align:center;margin-top:.25rem}
    </style>
  </head>
  <body>
    <header>
      <nav>
        <a href="/" style="font-weight:700;">Home</a>
        <a href="/posts">Posts</a>
      </nav>
    </header>
    <main>
      <article>
        <h1 style="margin-bottom:.5rem;">{frontmatter.title}</h1>

        {hero && (
          <figure>
            <img
              src={typeof hero === 'string' ? hero : (hero as any).src}
              alt={frontmatter.title}
            />
            {frontmatter.title && <figcaption>{frontmatter.title}</figcaption>}
          </figure>
        )}

        <slot />
      </article>
    </main>
  </body>
</html>
